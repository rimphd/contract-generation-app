{% extends "base.html" %}
{% block content %}
<h1 class="page-title mb-2">Contrat généré</h1>
<p class="meta mb-3">
  Modèle: <span class="model">{{ model_id }}</span> · Température: {{ temperature }}
</p>

<div class="contract-actions d-flex flex-wrap align-items-center gap-2 mb-3">
  <a class="btn btn-secondary" href="{{ url_for('index') }}">← Retour</a>
  <button class="btn btn-outline-primary" id="copyBtn">Copier le contrat</button>

  <form method="post" action="{{ url_for('download_docx_no_db') }}" class="m-0">
    <textarea name="contract_text" hidden>{{ contract_text }}</textarea>
    <button class="btn btn-success" type="submit">Télécharger (.docx)</button>
  </form>

  <form method="post" action="{{ url_for('download_pdf_no_db') }}" class="m-0">
    <textarea name="contract_text" hidden>{{ contract_text }}</textarea>
    <button class="btn btn-danger" type="submit">Télécharger (.pdf)</button>
  </form>
</div>

<div class="contract-card">
  <pre class="contract-content" id="contractText">{{ contract_text }}</pre>
</div>

<script>
document.getElementById('copyBtn').addEventListener('click', async () => {
  const text = document.getElementById('contractText').innerText;
  await navigator.clipboard.writeText(text);
  alert('Contrat copié !');
});
</script>


{% endblock %}
